# {{ name }}

{% if archetype == "library" %}
A reusable PyFly library.
{% elif archetype == "hexagonal" %}
A PyFly application using hexagonal architecture (ports & adapters).
{% elif archetype == "web-api" %}
A PyFly REST API with layered architecture.
{% elif archetype == "cli" %}
A PyFly command-line application with interactive shell.
{% else %}
A PyFly microservice.
{% endif %}

## Quick Start

```bash
# Create virtual environment
python -m venv .venv
source .venv/bin/activate

# Install dependencies (editable mode for development)
pip install -e ".[dev]"
{% if archetype == "cli" %}

# Run the CLI application
python -m {{ package_name }}.main
{% elif archetype != "library" %}

# Run the application
pyfly run --reload
{% endif %}

# Run tests
pytest
```
{% if archetype != "library" %}

## Project Structure

```
{{ name }}/
{% if archetype == "hexagonal" %}
  src/{{ package_name }}/
    app.py                          # Application definition
    main.py                         # ASGI entry point (uvicorn target)
    domain/                         # Domain layer (entities, events, ports)
      models.py                     # Domain entities
      events.py                     # Domain events
      ports/
        inbound.py                  # Use-case interfaces (Protocols)
        outbound.py                 # Repository interfaces
    application/                    # Application layer (use cases)
      services.py                   # Service implementations
    infrastructure/                 # Infrastructure layer (adapters)
      adapters/
        persistence.py              # Repository implementations
      config.py                     # Configuration beans
    api/                            # API layer (controllers, DTOs)
      controllers.py                # REST controllers
      dto.py                        # Request/response models
{% elif archetype == "web-api" %}
  src/{{ package_name }}/
    app.py                          # Application definition
    main.py                         # ASGI entry point (uvicorn target)
    controllers/                    # REST controllers
      health_controller.py          # Health check endpoint
      item_controller.py            # Example CRUD controller
    services/                       # Business logic
      item_service.py               # Example service
    models/                         # Pydantic models
      item.py                       # Request/response DTOs
    repositories/                   # Data access
      item_repository.py            # Example repository
{% elif archetype == "cli" %}
  src/{{ package_name }}/
    app.py                          # Application definition
    main.py                         # CLI entry point
    commands/                       # Shell commands
      hello_command.py              # Example @shell_component
    services/                       # Business logic
      greeting_service.py           # Example @service
{% else %}
  src/{{ package_name }}/
    app.py                          # Application definition
    main.py                         # ASGI entry point (uvicorn target)
{% endif %}
  tests/                            # Test suite
  pyfly.yaml                        # Framework configuration
  pyproject.toml                    # Project metadata
  Dockerfile                        # Container build
```
{% if archetype == "cli" %}

## Usage

```bash
# Run the CLI application
python -m {{ package_name }}.main

# Available commands (once running):
#   hello [--name NAME]    Say hello
#   goodbye [--name NAME]  Say goodbye
#   help                   Show available commands
```
{% else %}

## API Documentation

Once running, visit:
- **Swagger UI:** http://localhost:8080/docs
- **ReDoc:** http://localhost:8080/redoc
- **OpenAPI JSON:** http://localhost:8080/openapi.json
{% endif %}
{% endif %}

## Development

```bash
# Lint
ruff check src/

# Type check
mypy src/

# Test with coverage
pytest --cov={{ package_name }}
```
