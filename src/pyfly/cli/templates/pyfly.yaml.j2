pyfly:
  app:
    name: {{ name }}
{% if archetype not in ("library", "cli") %}
    module: {{ package_name }}.main:app
{% endif %}

{% if has_web or archetype in ("web-api", "hexagonal", "core") %}
  web:
    port: 8080
    adapter: auto
{% endif %}

{% if archetype == "cli" or has_shell %}
  shell:
    enabled: true
{% endif %}

{% if archetype != "library" %}
  actuator:
    endpoints:
      enabled: true
{% endif %}

  logging:
    level:
      root: INFO
{% if has_data %}

  data:
    relational:
      enabled: true
      url: sqlite+aiosqlite:///{{ package_name }}.db
{% endif %}
{% if has_mongodb %}

  data:
    document:
      enabled: true
      uri: mongodb://localhost:27017
      database: {{ package_name }}
{% endif %}
{% if has_cache %}

  cache:
    enabled: true
    provider: memory
    ttl: 300
    # Redis (production — install pyfly[redis] and uncomment):
    # provider: redis
    # redis:
    #   url: redis://localhost:6379/0
{% endif %}
{% if has_eda %}

  messaging:
    provider: memory
    # Kafka (production — install pyfly[kafka] and uncomment):
    # provider: kafka
    # kafka:
    #   bootstrap-servers: localhost:9092
{% endif %}
{% if has_security %}

  security:
    jwt:
      secret: change-me-in-production
      expiration: 3600
{% endif %}
{% if has_observability %}

  observability:
    metrics:
      enabled: true
    tracing:
      enabled: true
{% endif %}
