{% if has_data or has_mongodb %}
"""Todo repository — database-backed."""

from pyfly.container import repository
{% if has_data %}
from pyfly.data.relational.sqlalchemy import Repository

from {{ package_name }}.models.todo import TodoEntity
{% endif %}
{% if has_mongodb %}
from pyfly.data.document.mongodb import MongoRepository

from {{ package_name }}.models.todo import TodoDocument
{% endif %}
{% if has_data %}


@repository
class TodoRepository(Repository[TodoEntity, int]):
    """Relational repository — inherits full CRUD. Add custom queries by defining stub methods."""
{% endif %}
{% if has_mongodb %}


@repository
class TodoDocumentRepository(MongoRepository[TodoDocument, str]):
    """Document repository — inherits full CRUD. Add custom queries by defining stub methods."""
{% endif %}
{% else %}
"""Todo repository with in-memory storage."""

from pyfly.container import repository

from {{ package_name }}.models.todo import TodoResponse


@repository
class TodoRepository:
    """In-memory todo store. Replace with a database-backed implementation."""

    def __init__(self) -> None:
        self._store: dict[str, TodoResponse] = {}

    def save(self, todo_id: str, todo: TodoResponse) -> None:
        self._store[todo_id] = todo

    def find_by_id(self, todo_id: str) -> TodoResponse:
        return self._store[todo_id]

    def find_all(self) -> list[TodoResponse]:
        return list(self._store.values())

    def delete(self, todo_id: str) -> None:
        self._store.pop(todo_id, None)
{% endif %}
