"""Tests for item controller."""

from {{ package_name }}.models.item import ItemCreate
from {{ package_name }}.services.item_service import ItemService
from {{ package_name }}.repositories.item_repository import ItemRepository


class TestItemService:
    def setup_method(self) -> None:
        self.repository = ItemRepository()
        self.service = ItemService(self.repository)

    def test_create_item(self) -> None:
        item = self.service.create(ItemCreate(name="Widget", description="A widget"))
        assert item.name == "Widget"
        assert item.id

    def test_list_items(self) -> None:
        self.service.create(ItemCreate(name="A"))
        self.service.create(ItemCreate(name="B"))
        assert len(self.service.list_all()) == 2

    def test_get_item(self) -> None:
        created = self.service.create(ItemCreate(name="Widget"))
        found = self.service.get(created.id)
        assert found.name == "Widget"

    def test_delete_item(self) -> None:
        created = self.service.create(ItemCreate(name="Widget"))
        self.service.delete(created.id)
        assert len(self.service.list_all()) == 0
